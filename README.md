# Experiment result:
About +0.0006 EV for each game

# Rules
- Infinite decks, so at any point each element of {A, 2, 3, 4, 5, 6, 7, 8, 9, T, J, Q, K} has 1/13 chance to occur.
- Blackjack payout is 1.5.
- Double or split after splits is allowed.
- Late surrender is allowed (after dealer checks blackjack, player can choose to surrender and keep 0.5).

# Usage

To run a simulation of many games, to test accuracy of policy:
```
python3 sim.py
```

To play blackjack manually:
```
python3 game.py
```

To print out blackjack charts for player actions:
```
python3 solve.py
```

For example, the following may be displayed:
```text
+----------+--------+--------+--------+--------+--------+--------+--------+--------+--------+--------+
| EV stand |  1/11  |  (10)  |  (9)   |  (8)   |  (7)   |  (6)   |  (5)   |  (4)   |  (3)   |  (2)   |
+----------+--------+--------+--------+--------+--------+--------+--------+--------+--------+--------+
|    21    | 0.922  | 0.963  | 0.939  | 0.931  | 0.926  | 0.903  | 0.892  | 0.889  | 0.885  | 0.882  |
|    20    | 0.655  | 0.555  | 0.758  | 0.792  | 0.773  | 0.704  |  0.67  | 0.661  |  0.65  |  0.64  |
|    19    | 0.278  | 0.063  | 0.288  | 0.594  | 0.616  | 0.496  |  0.44  | 0.423  | 0.404  | 0.386  |
|    18    |  -0.1  | -0.178 | -0.183 | 0.106  |  0.4   | 0.283  |  0.2   | 0.176  | 0.148  | 0.122  |
|    17    | -0.478 | -0.42  | -0.423 | -0.382 | -0.107 | 0.012  | -0.045 | -0.081 | -0.117 | -0.153 |
|    16    | -0.667 | -0.54  | -0.543 | -0.511 | -0.475 | -0.154 | -0.167 | -0.211 | -0.252 | -0.293 |
+----------+--------+--------+--------+--------+--------+--------+--------+--------+--------+--------+

+-------+--------+--------+--------+--------+--------+--------+--------+--------+--------+--------+
|   EV  |  1/11  |  (10)  |  (9)   |  (8)   |  (7)   |  (6)   |  (5)   |  (4)   |  (3)   |  (2)   |
+-------+--------+--------+--------+--------+--------+--------+--------+--------+--------+--------+
|   21  | 0.922  | 0.963  | 0.939  | 0.931  | 0.926  | 0.903  | 0.892  | 0.889  | 0.885  | 0.882  |
|   20  | 0.655  | 0.555  | 0.758  | 0.792  | 0.773  | 0.704  |  0.67  | 0.661  |  0.65  |  0.64  |
|   19  | 0.278  | 0.063  | 0.288  | 0.594  | 0.616  | 0.496  |  0.44  | 0.423  | 0.404  | 0.386  |
|   18  |  -0.1  | -0.178 | -0.183 | 0.106  |  0.4   | 0.283  |  0.2   | 0.176  | 0.148  | 0.122  |
|   17  | -0.478 | -0.42  | -0.423 | -0.382 | -0.107 | 0.012  | -0.045 | -0.081 | -0.117 | -0.153 |
|   16  | -0.517 | -0.54  | -0.509 | -0.458 | -0.415 | -0.154 | -0.167 | -0.211 | -0.252 | -0.293 |
|   15  | -0.48  | -0.504 | -0.472 | -0.417 | -0.37  | -0.154 | -0.167 | -0.211 | -0.252 | -0.293 |
|   14  | -0.44  | -0.466 | -0.431 | -0.372 | -0.321 | -0.154 | -0.167 | -0.211 | -0.252 | -0.293 |
|   13  | -0.397 | -0.425 | -0.387 | -0.324 | -0.269 | -0.154 | -0.167 | -0.211 | -0.252 | -0.293 |
|   12  | -0.351 | -0.381 | -0.34  | -0.272 | -0.213 | -0.154 | -0.167 | -0.211 | -0.234 | -0.253 |
|   11  | 0.143  | 0.119  | 0.158  |  0.23  | 0.292  | 0.334  | 0.307  | 0.283  |  0.26  | 0.238  |
|   10  | 0.081  | 0.025  | 0.117  | 0.198  | 0.257  | 0.288  | 0.256  |  0.23  | 0.206  | 0.182  |
|   9   | -0.066 | -0.153 | -0.052 | 0.098  | 0.172  | 0.196  | 0.158  | 0.129  | 0.101  | 0.074  |
|   8   | -0.197 | -0.249 | -0.21  | -0.06  | 0.082  | 0.115  | 0.071  | 0.039  | 0.008  | -0.022 |
|   7   | -0.31  | -0.319 | -0.285 | -0.211 | -0.069 | 0.029  | -0.007 | -0.043 | -0.077 | -0.109 |
|   6   | -0.304 | -0.338 | -0.293 | -0.217 | -0.152 | -0.013 | -0.035 | -0.073 | -0.107 | -0.141 |
|   5   | -0.279 | -0.313 | -0.267 | -0.188 | -0.119 | -0.001 | -0.024 | -0.061 | -0.095 | -0.128 |
|   4   | -0.253 | -0.289 | -0.241 | -0.159 | -0.088 | 0.011  | -0.012 | -0.049 | -0.083 | -0.115 |
|   3   | -0.228 | -0.265 | -0.215 | -0.131 | -0.057 | 0.024  |  0.0   | -0.036 | -0.069 | -0.101 |
| 10/20 | 0.655  | 0.555  | 0.758  | 0.792  | 0.773  | 0.704  |  0.67  | 0.661  |  0.65  |  0.64  |
|  9/19 | 0.278  | 0.063  | 0.288  | 0.594  | 0.616  | 0.496  |  0.44  | 0.423  | 0.404  | 0.386  |
|  8/18 | -0.093 | -0.144 | -0.101 | 0.106  |  0.4   | 0.283  |  0.2   | 0.176  | 0.148  | 0.122  |
|  7/17 | -0.18  | -0.197 | -0.15  | -0.073 | 0.054  | 0.128  | 0.091  | 0.059  | 0.029  |  -0.0  |
|  6/16 | -0.166 | -0.207 | -0.149 | -0.067 | -0.005 | 0.099  | 0.073  |  0.04  | 0.009  | -0.021 |
|  5/15 | -0.13  | -0.174 | -0.112 | -0.027 | 0.037  | 0.118  | 0.092  | 0.059  | 0.029  |  -0.0  |
|  4/14 | -0.094 | -0.139 | -0.075 | 0.013  |  0.08  | 0.139  | 0.112  |  0.08  | 0.051  | 0.022  |
|  3/13 | -0.057 | -0.105 | -0.038 | 0.054  | 0.122  | 0.162  | 0.133  | 0.102  | 0.074  | 0.047  |
|  2/12 | -0.02  | -0.07  |  0.0   | 0.095  | 0.165  | 0.186  | 0.156  | 0.127  | 0.104  | 0.082  |
+-------+--------+--------+--------+--------+--------+--------+--------+--------+--------+--------+

+--------+------+------+-----+-----+-----+-----+-----+-----+-----+-----+
| Action | 1/11 | (10) | (9) | (8) | (7) | (6) | (5) | (4) | (3) | (2) |
+--------+------+------+-----+-----+-----+-----+-----+-----+-----+-----+
|   21   |  S   |  S   |  S  |  S  |  S  |  S  |  S  |  S  |  S  |  S  |
|   20   |  S   |  S   |  S  |  S  |  S  |  S  |  S  |  S  |  S  |  S  |
|   19   |  S   |  S   |  S  |  S  |  S  |  S  |  S  |  S  |  S  |  S  |
|   18   |  S   |  S   |  S  |  S  |  S  |  S  |  S  |  S  |  S  |  S  |
|   17   |  S   |  S   |  S  |  S  |  S  |  S  |  S  |  S  |  S  |  S  |
|   16   |  R   |  R   |  R  |  H  |  H  |  S  |  S  |  S  |  S  |  S  |
|   15   |  H   |  R   |  H  |  H  |  H  |  S  |  S  |  S  |  S  |  S  |
|   14   |  H   |  H   |  H  |  H  |  H  |  S  |  S  |  S  |  S  |  S  |
|   13   |  H   |  H   |  H  |  H  |  H  |  S  |  S  |  S  |  S  |  S  |
|   12   |  H   |  H   |  H  |  H  |  H  |  S  |  S  |  S  |  H  |  H  |
|   11   |  H   |  D   |  D  |  D  |  D  |  D  |  D  |  D  |  D  |  D  |
|   10   |  H   |  H   |  D  |  D  |  D  |  D  |  D  |  D  |  D  |  D  |
|   9    |  H   |  H   |  H  |  H  |  H  |  D  |  D  |  D  |  D  |  H  |
|   8    |  H   |  H   |  H  |  H  |  H  |  H  |  H  |  H  |  H  |  H  |
|   7    |  H   |  H   |  H  |  H  |  H  |  H  |  H  |  H  |  H  |  H  |
|   6    |  H   |  H   |  H  |  H  |  H  |  H  |  H  |  H  |  H  |  H  |
|   5    |  H   |  H   |  H  |  H  |  H  |  H  |  H  |  H  |  H  |  H  |
|   4    |  H   |  H   |  H  |  H  |  H  |  H  |  H  |  H  |  H  |  H  |
|   3    |  H   |  H   |  H  |  H  |  H  |  H  |  H  |  H  |  H  |  H  |
| 10/20  |  S   |  S   |  S  |  S  |  S  |  S  |  S  |  S  |  S  |  S  |
|  9/19  |  S   |  S   |  S  |  S  |  S  |  S  |  S  |  S  |  S  |  S  |
|  8/18  |  H   |  H   |  H  |  S  |  S  |  D  |  D  |  D  |  D  |  S  |
|  7/17  |  H   |  H   |  H  |  H  |  H  |  D  |  D  |  D  |  D  |  H  |
|  6/16  |  H   |  H   |  H  |  H  |  H  |  D  |  D  |  D  |  H  |  H  |
|  5/15  |  H   |  H   |  H  |  H  |  H  |  D  |  D  |  H  |  H  |  H  |
|  4/14  |  H   |  H   |  H  |  H  |  H  |  D  |  D  |  H  |  H  |  H  |
|  3/13  |  H   |  H   |  H  |  H  |  H  |  D  |  H  |  H  |  H  |  H  |
|  2/12  |  H   |  H   |  H  |  H  |  H  |  H  |  H  |  H  |  H  |  H  |
+--------+------+------+-----+-----+-----+-----+-----+-----+-----+-----+

+-------+------+------+-----+-----+-----+-----+-----+-----+-----+-----+
| Split | 1/11 | (10) | (9) | (8) | (7) | (6) | (5) | (4) | (3) | (2) |
+-------+------+------+-----+-----+-----+-----+-----+-----+-----+-----+
| 10+10 |  N   |  N   |  N  |  N  |  N  |  N  |  N  |  N  |  N  |  N  |
|  9+9  |  N   |  N   |  S  |  S  |  N  |  S  |  S  |  S  |  S  |  S  |
|  8+8  |  S   |  S   |  S  |  S  |  S  |  S  |  S  |  S  |  S  |  S  |
|  7+7  |  N   |  N   |  N  |  N  |  S  |  S  |  S  |  S  |  S  |  S  |
|  6+6  |  N   |  N   |  N  |  N  |  N  |  S  |  S  |  S  |  S  |  S  |
|  5+5  |  N   |  N   |  N  |  N  |  N  |  N  |  N  |  N  |  N  |  N  |
|  4+4  |  N   |  N   |  N  |  N  |  N  |  S  |  S  |  N  |  N  |  N  |
|  3+3  |  N   |  N   |  N  |  N  |  S  |  S  |  S  |  S  |  S  |  S  |
|  2+2  |  N   |  N   |  N  |  N  |  S  |  S  |  S  |  S  |  S  |  S  |
|  1+1  |  S   |  S   |  S  |  S  |  S  |  S  |  S  |  S  |  S  |  S  |
+-------+------+------+-----+-----+-----+-----+-----+-----+-----+-----+
```

# Note
No guarantees that code is bug-free.
